import{g as t,E,S as y,a as v,s as S,U as L}from"./vendor-c62f568f.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(i){if(i.ep)return;i.ep=!0;const n=s(i);fetch(i.href,n)}})();class T{constructor(){this.addEventListeners(),this.create()}create(){this.setFixedElements(),setTimeout(()=>this.setFixedElements(),50),this.setCoverWidths()}setFixedElements(){const e=window.innerWidth-document.querySelector(".home__feed").offsetWidth;document.querySelector("nav").style.right=`${e}px`}setCoverWidths(){document.querySelectorAll(".page__button__cover").forEach(e=>{e.style.width=`${e.parentNode.offsetWidth-16}px`}),document.querySelectorAll(".page__button:not(.fade-out)").forEach(e=>{t.set(".page__button.fade-out",{y:-100})})}onModeLightClick(){document.body.classList.contains("dark-mode")&&(document.body.classList.remove("dark-mode"),window.localStorage.setItem("dark-mode",0))}onModeDarkClick(){document.body.classList.contains("dark-mode")||(document.body.classList.add("dark-mode"),window.localStorage.setItem("dark-mode",1))}addEventListeners(){document.querySelector(".nav__bottom__mode__light").addEventListener("click",this.onModeLightClick.bind(this)),document.querySelector(".nav__bottom__mode__dark").addEventListener("click",this.onModeDarkClick.bind(this))}}class q extends E{constructor(){super(),this.imgsToPreload=[],this.type=window.isWebp?"image/webp":"image/jpeg",this.devicePixelRatio=window.devicePixelRatio,this.curImg=0,this.imgsPreloaded=0}addImgsToQueueAndPreload(e){const s=this.imgsToPreload.length>0;e.forEach(o=>{this.imgsToPreload.push(o)}),s||this.preloadImg(this.imgsToPreload[this.curImg])}preloadImg(){if(this.curImg<this.imgsToPreload.length){const e=this.imgsToPreload[this.curImg];let s="";window.innerWidth<=656?s=e.querySelector(`source[media="(max-width: 656px)"][type="${this.type}"]`).getAttribute("data-srcset"):(s=e.querySelector(`source:not([media="(max-width: 656px)"])[type="${this.type}"]`).getAttribute("data-srcset"),s=s.split(", "),s=s[this.devicePixelRatio>1?0:1].split(" ")[0]),this.image=new window.Image,this.image.src=s,this.image.decode().then(()=>this.onPreloadedImg(e)),this.image.onerror=()=>{this.onPreloadedImg(e)},window.requestAnimationFrame(()=>{this.curImg++,this.curImg<this.imgsToPreload.length&&this.preloadImg()})}}onPreloadedImg(e){e.classList.add("preloaded"),e.querySelectorAll("source").forEach(s=>{s.setAttribute("srcset",s.getAttribute("data-srcset"))}),e.querySelector("img").setAttribute("src",e.querySelector("img").getAttribute("data-src")),this.imgsPreloaded++,this.imgsPreloaded===this.imgsToPreload.length&&this.onPreloadedImgs()}onPreloadedImgs(){this.imgsToPreload=[],this.emit("loaded")}}class C{constructor(){this.zoomInnerElement=document.querySelector(".home__zoom__inner"),this.cursorElement=document.querySelector(".home__zoom__cursor"),this.zoomInnerWidth=this.zoomInnerElement.offsetWidth,this.mouse={x:null,y:null},this.cursor={x:null,y:null},this.status="",this.cursorPosition=t.quickSetter(this.cursorElement,"css"),this.addEventListeners()}onMouseMove(e){const{clientX:s,clientY:o}=e;this.cursorPosition({x:s,y:o});const i=s/this.zoomInnerWidth<=.5?"prev":"next";i!==this.status&&(i==="prev"?(this.cursorElement.classList.add("prev"),this.cursorElement.classList.remove("next")):i==="next"&&(this.cursorElement.classList.add("next"),this.cursorElement.classList.remove("prev")),this.status=i)}onZoomMouseEnter(){this.cursorElement.classList.remove("hidden")}onZoomMouseLeave(){this.cursorElement.classList.add("hidden")}onResize(){this.zoomInnerWidth=this.zoomInnerElement.offsetWidth}addEventListeners(){this.zoomInnerElement.addEventListener("mouseenter",this.onZoomMouseEnter.bind(this)),this.zoomInnerElement.addEventListener("mouseleave",this.onZoomMouseLeave.bind(this))}}class P{constructor({homeGallery:e}){this.homeGallery=e,this.isOpen=!1,this.navTitle=document.querySelector(".nav__top__title"),this.navAboutButton=document.querySelector(".nav__top__about__button"),this.preloadedZoomImgs=[],this.type=window.isWebp?"image/webp":"image/jpeg",this.devicePixelRatio=window.devicePixelRatio,this.zoomElement=document.querySelector(".home__zoom"),this.zoomBgElement=this.zoomElement.querySelector(".home__zoom__bg"),this.zoomInnerElement=this.zoomElement.querySelector(".home__zoom__inner"),this.zoomCursorElement=document.querySelector(".home__zoom__cursor"),this.zoomCloseButton=document.querySelector(".nav__top__close__zoom__button"),this.zoomLabelElement=document.querySelector(".nav__top__zoom__label"),this.zoomLabelSpanElement=this.zoomLabelElement.querySelector("span"),this.zoomInnerWidth=this.zoomInnerElement.offsetWidth,this.feedElement=document.querySelectorAll(".wrapper"),this.feedButton=document.querySelector(".nav__top__feed__button"),this.feedItems=document.querySelectorAll(".home__feed__img"),this.feedLabelElement=document.querySelector(".nav__bottom__mobile__current"),this.feedLabelSpanElement=this.feedLabelElement.querySelector(".nav__bottom__mobile__current span"),this.indexModalElement=document.querySelector(".home__index__modal"),this.indexButton=document.querySelector(".nav__top__index__button"),this.indexItems=document.querySelectorAll(".home__index__thumb"),this.indexLabelElement=document.querySelector(".nav__top__index__label"),this.galleryZoomCursor=new C,this.addEventListeners()}onFeedItemClick(e){this.homeGallery.allowToggle&&(this.homeGallery.allowToggle=!1,this.zoomOpenFrom="feed",this.curId=Number(e.target.closest(".home__feed__img").getAttribute("data-index")),this.zoomLabelSpanElement.innerText=this.curId,this.feedLabelSpanElement.innerText=this.curId,this.indexButton.classList.add("fade-out"),this.navTitle.classList.add("fade-out"),this.navAboutButton.classList.add("fade-out"),setTimeout(()=>{t.set(this.indexButton,{y:-100}),t.set(this.zoomCloseButton,{clearProps:"y"}),this.zoomCloseButton.classList.remove("fade-out"),t.set(this.zoomLabelElement,{clearProps:"y"}),this.zoomLabelElement.classList.remove("fade-out")},400),this.openZoom())}onIndexItemClick(e){this.homeGallery.allowToggle&&(this.homeGallery.allowToggle=!1,this.zoomOpenFrom="index",this.curId=Number(e.target.closest(".home__index__thumb").getAttribute("data-index")),this.zoomLabelSpanElement.innerText=this.curId,this.feedLabelSpanElement.innerText=this.curId,this.isOpen||(this.feedButton.classList.add("fade-out"),this.navTitle.classList.add("fade-out"),this.navAboutButton.classList.add("fade-out"),this.indexLabelElement.classList.add("fade-out"),setTimeout(()=>{t.set(this.feedButton,{y:-100}),t.set(this.indexLabelElement,{y:-100}),t.set(this.zoomCloseButton,{clearProps:"y"}),this.zoomCloseButton.classList.remove("fade-out"),t.set(this.zoomLabelElement,{clearProps:"y"}),this.zoomLabelElement.classList.remove("fade-out")},400)),this.openZoom())}openZoom(){new Promise((e,s)=>{switch(this.curId){case 1:this.zoomElement.setAttribute("data-current","first");break;case this.feedItems.length:this.zoomElement.setAttribute("data-current","last");break;default:this.zoomElement.removeAttribute("data-current");break}this.tlZoomIn=t.timeline({paused:!0,once:!0}),this.tlZoomIn.set(this.zoomElement,{visibility:"initial",pointerEvents:"auto"}),e()}).then(()=>this.animateZoomIn())}animateZoomIn(){let e="feed";const s=document.querySelector(`.home__feed__img[data-index="${this.curId}"]`);let o=s.querySelector(".home__feed__img__img");this.zoomOpenFrom==="feed"?(this.curThumb=s,this.curThumbImg=o):(this.curThumb=document.querySelector(`.home__index__thumb[data-index="${this.curId}"]`),this.curThumbImg=this.curThumb.querySelector(".home__index__thumb__img"),s.querySelector("picture").classList.contains("preloaded")||(o=this.curThumbImg,e="index"));const{x:i,y:n,width:l,height:d}=this.curThumbImg.getBoundingClientRect();let a=window.innerHeight+2,m=l/d*a;m>this.zoomInnerElement.offsetWidth&&(m=this.zoomInnerElement.offsetWidth,a=m/(l/d));let h=(this.zoomInnerElement.offsetWidth-m)/2,_=(window.innerHeight+2-a)/2;const c=(window.innerHeight+2-this.curThumb.offsetHeight)/2,r=document.createElement("div");r.classList="home__zoom__item";let u=o.innerHTML;r.innerHTML=u,r.querySelector("picture").classList.contains("preloaded")&&t.set(r,{backgroundColor:"initial"},"<");const f=r.querySelector("picture source:nth-child(1)").getAttribute("data-srcset").replaceAll(e,"feed"),p=r.querySelector("picture source:nth-child(2)").getAttribute("data-srcset").replaceAll(e,"feed"),g=r.querySelector("picture source:nth-child(3)").getAttribute("data-srcset").replaceAll(e,"feed"),I=r.querySelector("picture source:nth-child(4)").getAttribute("data-srcset").replaceAll(e,"feed"),w=r.querySelector("img").getAttribute("data-src").replaceAll(e,"feed");if(this.preloadedZoomImgs[this.curId]==="preloaded"?r.innerHTML+=`<picture>
                                      <source media="(max-width: 656px)" srcset="${f}" type="image/webp">
                                      <source media="(max-width: 656px)" srcset="${p}" type="image/jpeg">
                                      <source srcset="${g}" type="image/webp">
                                      <source srcset="${I}" type="image/jpeg">
                                      <img src="${w}" alt="">
                                    </picture>`:r.innerHTML+=`<picture class="img__to__preload selfpreload">
                                      <source media="(max-width: 656px)" data-srcset="${f}" type="image/webp">
                                      <source media="(max-width: 656px)" data-srcset="${p}" type="image/jpeg">
                                      <source data-srcset="${g}" type="image/webp">
                                      <source data-srcset="${I}" type="image/jpeg">
                                      <img data-src="${w}" alt="">
                                    </picture>`,this.zoomInnerElement.appendChild(r),this.preloadedZoomImgs[this.curId]!=="preloaded"&&this.preloadImg(this.zoomInnerElement.querySelector(".img__to__preload.selfpreload:last-child:not(.preloaded)"),this.curId),!this.isOpen)this.tlZoomIn.set(this.zoomCursorElement,{opacity:1},"<"),this.tlZoomIn.set(r,{x:i,y:n,aspectRatio:`${l}/${d}`,height:d,autoRound:!1},"<"),this.zoomOpenFrom==="feed"&&this.tlZoomIn.to(this.feedElement,{scrollTo:{y:this.curThumb,offsetY:c},duration:.6,ease:"power2.inOut"},"<"),this.tlZoomIn.to(this.zoomBgElement,{opacity:1,duration:.35,ease:"power2.inOut"},"<"),this.tlZoomIn.to(r,{x:h,y:_,width:m,height:a,autoRound:!1,duration:.6,ease:"power2.inOut"},"<"),this.tlZoomIn.set(r,{left:"50%",top:"50%",x:"-50%",y:"-50%",autoRound:!1,onComplete:()=>{this.preloadedZoomImgs[this.curId]!=="preloaded"&&this.preloadImg(this.zoomInnerElement.querySelector(".img__to__preload.selfpreload:last-child:not(.preloaded)"),this.curId),this.isOpen=!0,this.homeGallery.allowToggle=!0}},">");else{this.tlZoomIn.set(r,{opacity:0,aspectRatio:`${l}/${d}`,width:m,height:a,left:"50%",top:"50%",x:"-50%",y:"-50%",autoRound:!1},"<"),this.zoomOpenFrom==="feed"&&this.tlZoomIn.set(this.feedElement,{scrollTo:{y:this.curThumb,offsetY:c}},"<");const x=document.querySelector(".home__zoom__item:first-child");this.tlZoomIn.to(x,{opacity:0,duration:.4,ease:"power2.inOut"},"<"),this.tlZoomIn.to(r,{opacity:1,duration:.4,ease:"power2.inOut",onComplete:()=>{x.remove(),this.preloadedZoomImgs[this.curId]!=="preloaded"&&this.preloadImg(this.zoomInnerElement.querySelector(".img__to__preload.selfpreload:last-child:not(.preloaded)"),this.curId),this.isOpen=!0,this.homeGallery.allowToggle=!0}},"<")}m===this.zoomInnerElement.offsetWidth?this.tlZoomIn.set(r,{width:"100%",clearProps:"height",autoRound:!1},">"):this.tlZoomIn.set(r,{height:"calc(100% + 2px)",clearProps:"width",autoRound:!1},">"),this.zoomOpenFrom==="index"&&this.tlZoomIn.to(this.feedLabelElement,{opacity:1,duration:.3,ease:"power2.inOut"},.4),this.tlZoomIn.play(0)}preloadImg(e,s){let o="";window.innerWidth<=656?o=e.querySelector(`source[media="(max-width: 656px)"][type="${this.type}"]`).getAttribute("data-srcset"):(o=e.querySelector(`source:not([media="(max-width: 656px)"])[type="${this.type}"]`).getAttribute("data-srcset"),o=o.split(", "),o=o[this.devicePixelRatio>1?0:1].split(" ")[0]);const i=new window.Image;i.src=o,i.decode().then(()=>this.preloadImgOnPreload(e,s)),i.onerror=()=>{this.preloadImgOnPreload(e,s)}}preloadImgOnPreload(e,s){this.preloadedZoomImgs[s]="preloaded",e.classList.add("preloaded"),e.querySelectorAll("source").forEach(o=>{o.setAttribute("srcset",o.getAttribute("data-srcset"))}),e.querySelector("img").setAttribute("src",e.querySelector("img").getAttribute("data-src"))}onZoomPrevButtonClick(){this.curId>1&&this.curThumb.previousElementSibling.click()}onZoomNextButtonClick(){this.curId<this.feedItems.length&&this.curThumb.nextElementSibling.click()}onZoomCloseButtonClick(){if(this.homeGallery.allowToggle){if(this.homeGallery.allowToggle=!1,t.set(this.zoomCursorElement,{opacity:0}),this.zoomOpenFrom==="feed"){const e=(window.innerHeight-this.curThumb.offsetHeight)/2;setTimeout(()=>{t.set(this.indexButton,{clearProps:"y"}),this.indexButton.classList.remove("fade-out")},400),t.set(this.feedElement,{scrollTo:{y:this.curThumb,offsetY:e}})}else{let e=50;document.querySelector(`.home__index__thumb[data-index="${this.curId}"]`).offsetTop===document.querySelector('.home__index__thumb[data-index="1"]').offsetTop&&(e=document.querySelector('.home__index__thumb[data-index="1"]').offsetTop),setTimeout(()=>{t.set(this.feedButton,{clearProps:"y"}),this.feedButton.classList.remove("fade-out"),t.set(this.indexLabelElement,{clearProps:"y"}),this.indexLabelElement.classList.remove("fade-out")},400),t.set(this.indexModalElement,{scrollTo:{y:document.querySelector(`.home__index__thumb[data-index="${this.curId}"]`),offsetY:e}})}this.zoomLabelElement.classList.add("fade-out"),this.zoomCloseButton.classList.add("fade-out"),setTimeout(()=>{t.set(this.zoomLabelElement,{y:-100}),t.set(this.zoomCloseButton,{y:-100}),this.navTitle.classList.remove("fade-out"),this.navAboutButton.classList.remove("fade-out")},400),this.closeZoom()}}closeZoom(){new Promise((e,s)=>{this.tlZoomOut=t.timeline({paused:!0,once:!0,onComplete:()=>{t.set(this.zoomElement,{clearProps:"all"}),this.zoomInnerElement.innerHTML="",this.isOpen=!1,this.homeGallery.allowToggle=!0}}),e()}).then(()=>this.animateZoomOut())}animateZoomOut(){const e=document.querySelector(".home__zoom__item:last-child"),{x:s,y:o}=e.getBoundingClientRect(),i=this.curThumbImg.getBoundingClientRect(),n=i.x,l=i.y,d=i.width,a=i.height;this.tlZoomOut.set(e,{x:s,y:o,clearProps:"left,top",autoRound:!1},"<"),this.tlZoomOut.to(e,{x:n,y:l,width:d,height:a,autoRound:!1,duration:.6,ease:"power2.inOut"},"<"),this.zoomOpenFrom==="index"&&this.tlZoomOut.to(this.feedLabelElement,{opacity:0,duration:.3,ease:"power2.inOut"},"<"),this.tlZoomOut.to(this.zoomBgElement,{opacity:0,duration:.35,ease:"power2.inOut"},"<+=0.25"),this.zoomOpenFrom==="feed"&&this.tlZoomOut.fromTo(".home__feed__img__label",{opacity:0},{opacity:1,duration:.3,ease:"power2.inOut"},.4),this.tlZoomOut.play(0)}onMouseMove(e){this.galleryZoomCursor.onMouseMove(e)}onZoomTouchStart(e){this.touchStart=e.touches[0].pageX}onZoomTouchMove(e){this.touchMove=e.touches[0].pageX-this.touchStart}onZoomTouchEnd(){this.touchMove>=20?this.onZoomPrevButtonClick():this.touchMove<=-20&&this.onZoomNextButtonClick()}onZoomInnerElementClick(e){const{clientX:s}=e||e.touches[0];s/this.zoomInnerWidth<=.5?this.onZoomPrevButtonClick():this.onZoomNextButtonClick()}onZoomKeyDown(e){if(this.isOpen)switch(e.key){case"ArrowUp":case"ArrowLeft":this.onZoomPrevButtonClick();break;case"ArrowDown":case"ArrowRight":this.onZoomNextButtonClick();break;case"Escape":this.onZoomCloseButtonClick();break}}onResize(){this.zoomInnerWidth=this.zoomInnerElement.offsetWidth,this.galleryZoomCursor.onResize()}addEventListeners(){this.zoomInnerElement.addEventListener("click",this.onZoomInnerElementClick.bind(this)),this.zoomCloseButton.addEventListener("click",this.onZoomCloseButtonClick.bind(this)),this.feedItems.forEach(e=>e.addEventListener("click",this.onFeedItemClick.bind(this))),this.indexItems.forEach(e=>e.addEventListener("click",this.onIndexItemClick.bind(this))),window.isTouch?(this.zoomElement.addEventListener("touchstart",this.onZoomTouchStart.bind(this),{passive:!0}),this.zoomElement.addEventListener("touchmove",this.onZoomTouchMove.bind(this),{passive:!0}),this.zoomElement.addEventListener("touchend",this.onZoomTouchEnd.bind(this),{passive:!0})):document.addEventListener("keydown",this.onZoomKeyDown.bind(this))}}class z{constructor(){this.feedButton=document.querySelector(".nav__top__feed__button"),this.feedItems=document.querySelectorAll(".home__feed__img"),this.feedElement=document.querySelectorAll(".wrapper"),this.feedScrub=200,this.currentFeedItem=1,this.currentFeedScrollItem=document.querySelector(".home__feed__img__img:first-child"),this.currentFeedScrollElement=document.querySelector(".nav__bottom__mobile__current span"),this.currentFeedScrollItemIndex=1,this.indexButton=document.querySelector(".nav__top__index__button"),this.indexItems=document.querySelectorAll(".home__index__thumb"),this.indexModalElement=document.querySelector(".home__index__modal"),this.indexLabel=document.querySelector(".nav__top__index__label"),this.toggleViewElement=document.querySelector(".home__toggle__view"),this.status="feed",document.body.setAttribute("data-status","feed"),this.allowToggle=!0,this.createIndexScrollTrigger(),this.galleryZoom=new P({homeGallery:this}),this.addEventListeners()}createIndexScrollTrigger(){t.matchMedia().add({desktop:"(min-aspect-ratio: 1068/798)",tablet:"(max-aspect-ratio: 1068/798)",mobile:"(max-aspect-ratio: 695/924)"},s=>{let{desktop:o,tablet:i,mobile:n}=s.conditions,l=.15,d=31.75,a=.185,m="0% 100%",h="100% 0%",_=!0;return i&&(d=41,a=.24,_=this.feedScrub/1e3),n&&(d=56.5,a=.3334,m="0% 125%",h="100% -25%",_=this.feedScrub/1e3),this.tls=[],this.feedItems.forEach((c,r)=>{const u=c.querySelector(".home__feed__img__img"),f=c.querySelector(".home__feed__img__label"),p=c.querySelector(".home__feed__img__img"),g=t.timeline({scrollTrigger:{scroller:"main.wrapper",trigger:c,start:m,end:h,scrub:_,ease:"none"}}).from(u,{scale:l,ease:"linear",duration:.5},"0").to(u,{scale:l,ease:"linear",duration:.5},"0.5");n?(g.fromTo(p,{yPercent:-85},{yPercent:-28.5,duration:1/6,ease:"linear"},0),g.fromTo(p,{yPercent:-28.5},{yPercent:0,duration:1/6,ease:"linear"},1/6),g.fromTo(p,{yPercent:0},{yPercent:28.5,duration:1/6,ease:"linear"},1-1/3),g.fromTo(p,{yPercent:28.5},{yPercent:85,duration:1/6,ease:"linear"},1-1/6)):(r!==0&&(g.from(f,{height:`${l*100}%`,ease:"linear",duration:.5},"0"),g.to(f,{height:`${l*100}%`,ease:"linear",duration:.5},"0.5")),g.fromTo(p,{yPercent:-d},{yPercent:0,duration:a,ease:"linear"},0),g.fromTo(p,{yPercent:0},{yPercent:d,duration:a,ease:"linear"},1-a)),this.tls.push(g)}),setTimeout(()=>{this.getCurrentFeedScrollElement()},0),()=>{}})}onIndexButtonClick(){this.allowToggle&&(this.allowToggle=!1,this.status="index",document.body.setAttribute("data-status","index"),new Promise((e,s)=>{this.feedItemsVisible=[],this.feedItemsVisibleIndex=[];let o,i=1;this.tls.forEach((n,l)=>{n.scrollTrigger.isActive&&(this.feedItemsVisible.push(n.scrollTrigger.trigger),this.feedItemsVisibleIndex.push(Number(n.scrollTrigger.trigger.getAttribute("data-index"))),Math.abs(n.scrollTrigger.progress-.5)<i&&(i=Math.abs(n.scrollTrigger.progress-.5),o=l+1))}),this.currentFeedItem=o,e()}).then(()=>this.openIndex()))}openIndex(){new Promise((e,s)=>{let o=50;this.indexButton.classList.add("fade-out"),setTimeout(()=>{t.set(this.indexButton,{y:-100}),t.set(this.feedButton,{clearProps:"y"}),this.feedButton.classList.remove("fade-out"),t.set(this.indexLabel,{clearProps:"y"}),this.indexLabel.classList.remove("fade-out")},400),document.querySelector(`.home__index__thumb[data-index="${this.currentFeedItem}"]`).offsetTop===document.querySelector('.home__index__thumb[data-index="1"]').offsetTop&&(o=document.querySelector('.home__index__thumb[data-index="1"]').offsetTop),t.set(this.indexModalElement,{scrollTo:{y:document.querySelector(`.home__index__thumb[data-index="${this.currentFeedItem}"]`),offsetY:o}}),this.tlIndex=t.timeline({paused:!0,once:!0,onComplete:()=>{this.allowToggle=!0,t.set(".home__index__modal",{visibility:"initial"}),t.set(this.toggleViewElement,{clearProps:"visibility"}),this.toggleViewElement.innerHTML=""}}),this.tlIndex.set(this.toggleViewElement,{visibility:"initial"}),this.tlIndex.set(".home__feed__img__img",{visibility:"hidden"}),this.tlIndex.to(".home__feed__img__label, .nav__bottom__mobile__current",{opacity:0,duration:.3,ease:"power2.out"},">"),e()}).then(()=>this.animateInIndexItems())}animateInIndexItems(){new Promise((e,s)=>{this.visibleItems=[];for(let d=0;d<this.indexItems.length;d++){const a=this.indexItems[d];y.isInViewport(a)&&this.visibleItems.push(a)}const o=this.feedItemsVisibleIndex[this.feedItemsVisibleIndex.length-1],i=100,n=(window.innerWidth-i)/2;let l=0;this.visibleItems.forEach(d=>{const a=Number(d.getAttribute("data-index"));if(!this.feedItemsVisibleIndex.includes(a)){const{x:m,y:h,width:_,height:c}=d.querySelector(".home__index__thumb__img").getBoundingClientRect();let r=-window.innerHeight*.5;a>o&&(r=window.innerHeight*1.1);const u=document.createElement("div");u.classList="home__toggle__view__item",u.innerHTML=d.querySelector(".home__index__thumb__img").innerHTML,u.querySelector("picture").classList.contains("preloaded")&&t.set(u,{backgroundColor:"initial"},"<"),this.toggleViewElement.appendChild(u),this.tlIndex.set(u,{x:n,y:r,width:_,height:c,autoRound:!1},"<"),this.tlIndex.to(u,{x:m,y:h,autoRound:!1,duration:.8,ease:"power2.inOut"},l),l+=.01}}),e()}).then(()=>this.animateFeedItemsToIndex())}animateFeedItemsToIndex(){new Promise((e,s)=>{this.feedItemsVisible.forEach((o,i)=>{const n=o.getAttribute("data-index"),{x:l,y:d,width:a,height:m}=o.querySelector(".home__feed__img__img").getBoundingClientRect(),h=document.createElement("div");h.classList="home__toggle__view__item",h.innerHTML=h.innerHTML=o.querySelector(".home__feed__img__img").innerHTML,h.querySelector("picture").classList.contains("preloaded")&&t.set(h,{backgroundColor:"initial"},"<"),this.toggleViewElement.appendChild(h),t.set(h,{x:l,y:d,width:a,height:m,autoRound:!1});const c=document.querySelector(`.home__index__thumb[data-index="${n}"] .home__index__thumb__img`).getBoundingClientRect(),r=c.x,u=c.y,f=c.width/a;this.tlIndex.to(h,{x:r,y:u,scale:f,autoRound:!1,duration:.8,ease:"power2.inOut"},"0.02")}),e()}).then(()=>{setTimeout(()=>this.tlIndex.play(),0)})}getCurrentFeedScrollElement(){if(window.innerWidth<=768){const e=document.elementFromPoint(window.innerWidth/2,window.innerHeight/2).parentNode.closest(".home__feed__img");e&&e!==this.currentFeedScrollItem&&(this.currentFeedScrollItem=e,this.currentFeedScrollElement.textContent=Number(this.currentFeedScrollItem.getAttribute("data-index")))}}onFeedButtonClick(){this.allowToggle&&(this.allowToggle=!1,this.status="feed",document.body.setAttribute("data-status","feed"),new Promise((e,s)=>{if(!y.isInViewport(document.querySelector(`.home__index__thumb[data-index="${this.currentFeedItem}"] .home__index__thumb__img`)))for(let i=0;i<this.indexItems.length;i++){const n=this.indexItems[i];if(y.isInViewport(n,1)){this.currentFeedItem=i+1;break}}this.currentFeedScrollItem=document.querySelector(`.home__feed__img[data-index="${this.currentFeedItem}"]`),this.currentFeedScrollElement.textContent=Number(this.currentFeedScrollItem.getAttribute("data-index")),e()}).then(()=>this.openFeed()))}openFeed(){new Promise((e,s)=>{const o=(window.innerHeight-this.currentFeedScrollItem.offsetHeight)/2;this.feedButton.classList.add("fade-out"),this.indexLabel.classList.add("fade-out"),setTimeout(()=>{t.set(this.feedButton,{y:-100}),t.set(this.indexLabel,{y:-100}),t.set(this.indexButton,{clearProps:"y"}),this.indexButton.classList.remove("fade-out"),t.to(".home__feed__img__label, .nav__bottom__mobile__current",{opacity:1,duration:.3,ease:"power2.inOut"})},400),t.set(this.feedElement,{scrollTo:{y:this.currentFeedScrollItem,offsetY:o}}),setTimeout(()=>{this.feedItemsVisible=[],this.feedItemsVisibleIndex=[];for(let i=0;i<this.feedItems.length;i++){const n=this.feedItems[i];y.isInViewport(n)&&(this.feedItemsVisible.push(n),this.feedItemsVisibleIndex.push(Number(n.getAttribute("data-index"))))}this.tlFeed=t.timeline({paused:!0,once:!0,onComplete:()=>{t.set(".home__feed__img__img",{clearProps:"visibility"}),setTimeout(()=>{t.set(this.toggleViewElement,{clearProps:"visibility"}),this.allowToggle=!0,this.toggleViewElement.innerHTML=""},50)}}),t.set(this.toggleViewElement,{visibility:"initial"}),setTimeout(()=>{t.set(".home__index__modal",{clearProps:"visibility"})},50),e()},this.feedScrub)}).then(()=>this.animateOutIndexVisibleItems())}animateOutIndexVisibleItems(){new Promise((e,s)=>{this.visibleItems=[];for(let l=0;l<this.indexItems.length;l++){const d=this.indexItems[l];y.isInViewport(d)&&this.visibleItems.push(d)}const o=this.feedItemsVisibleIndex[this.feedItemsVisibleIndex.length-1],i=100,n=(window.innerWidth-i)/2;this.visibleItems.forEach(l=>{const d=Number(l.getAttribute("data-index"));if(!this.feedItemsVisibleIndex.includes(d)){const{x:a,y:m,width:h,height:_}=l.querySelector(".home__index__thumb__img").getBoundingClientRect();let c=-window.innerHeight*.5;d>o&&(c=window.innerHeight*1.1);const r=document.createElement("div");r.classList="home__toggle__view__item",r.innerHTML=l.querySelector(".home__index__thumb__img").innerHTML,r.querySelector("picture").classList.contains("preloaded")&&t.set(r,{backgroundColor:"initial"},"<"),this.toggleViewElement.appendChild(r),this.tlFeed.set(r,{x:a,y:m,width:h,height:_},"<"),this.tlFeed.to(r,{x:n,y:c,duration:.8,ease:"power2.inOut"},"0")}}),e()}).then(()=>this.animatIndexItemsToFeed())}animatIndexItemsToFeed(){new Promise((e,s)=>{this.feedItemsVisible.forEach((o,i)=>{const n=o.getAttribute("data-index"),{x:l,y:d,width:a}=o.querySelector(".home__feed__img__img").getBoundingClientRect(),m=document.createElement("div");m.classList="home__toggle__view__item",m.innerHTML=o.querySelector(".home__feed__img__img").innerHTML,m.querySelector("picture").classList.contains("preloaded")&&t.set(m,{backgroundColor:"initial"},"<"),this.toggleViewElement.appendChild(m);const _=document.querySelector(`.home__index__thumb[data-index="${n}"] .home__index__thumb__img`).getBoundingClientRect(),c=_.x,r=_.y,u=_.width,f=_.height,p=a/u;t.set(m,{x:c,y:r,width:u,height:f,autoRound:!1}),this.tlFeed.to(m,{x:l,y:d,scale:p,autoRound:!1,duration:.8,ease:"power2.inOut"},"0")}),e()}).then(()=>{setTimeout(()=>this.tlFeed.play(),0)})}onScroll(){this.getCurrentFeedScrollElement()}onMouseMove(e){this.galleryZoom.onMouseMove(e)}onResize(){this.galleryZoom.onResize()}addEventListeners(){this.onIndexButtonClickEvent=this.onIndexButtonClick.bind(this),this.onFeedButtonClickEvent=this.onFeedButtonClick.bind(this),this.indexButton.addEventListener("click",this.onIndexButtonClickEvent.bind(this)),this.feedButton.addEventListener("click",this.onFeedButtonClickEvent.bind(this))}}class B{constructor(){this.modalElement=document.querySelector(".about__modal"),this.openButton=document.querySelector(".nav__top__about__button"),this.closeButton=document.querySelector(".nav__top__close__about__button"),this.modalBgElement=this.modalElement.querySelector(".page__modal__bg"),this.modalInnerElement=this.modalElement.querySelector(".page__modal__inner"),this.indexLabelElement=document.querySelector(".nav__top__index__label"),this.navMobileCurrent=document.querySelector(".nav__bottom__mobile__current"),this.allowToggle=!0,this.galleryStatus=document.body.getAttribute("data-status"),this.scrollbarWidth=window.innerWidth-document.querySelector(".home__feed").offsetWidth,this.addEventListeners()}onOpenButtonClick(e){if(this.allowToggle){this.allowToggle=!1,this.galleryStatus=document.body.getAttribute("data-status"),this.modalElement.scrollTo(0,0),t.set(this.modalBgElement,{right:this.scrollbarWidth}),this.navButtonVisible=document.querySelector(".nav__top__right > div:not(.fade-out)"),this.navButtonVisible.classList.add("fade-out"),setTimeout(()=>{t.set(this.navButtonVisible,{y:-100}),t.set(".nav__top__close__about__button",{clearProps:"y"}),document.querySelector(".nav__top__close__about__button").classList.remove("fade-out"),this.galleryStatus==="feed"&&(t.set(this.indexLabelElement,{clearProps:"y"}),this.indexLabelElement.classList.remove("fade-out"))},400);const s=t.timeline({onComplete:()=>{this.allowToggle=!0}}).set(this.openButton,{pointerEvents:"none"}).set(this.modalElement,{visibility:"initial"}).to(this.modalBgElement,{opacity:1,duration:.5,ease:"power2.inOut"},"<");this.galleryStatus==="feed"&&(s.to(this.navMobileCurrent,{opacity:0,duration:.3,ease:"power2.inOut"},"<"),s.to(".home__feed__img__label",{opacity:0,duration:.3,ease:"power2.inOut"},"<")),s.to(this.modalInnerElement,{opacity:1,duration:.5,ease:"power2.inOut"},"<+=0.2")}}onCloseButtonClick(){if(this.allowToggle){this.allowToggle=!1,this.galleryStatus==="feed"&&this.indexLabelElement.classList.add("fade-out"),document.querySelector(".nav__top__close__about__button").classList.add("fade-out"),setTimeout(()=>{this.galleryStatus==="feed"?t.set(this.indexLabelElement,{y:-100}):this.galleryStatus==="index"&&(t.set(this.indexLabelElement,{clearProps:"y"}),this.indexLabelElement.classList.remove("fade-out")),t.set(document.querySelector(".nav__top__close__about__button"),{y:-100}),t.set(this.navButtonVisible,{clearProps:"y"}),this.navButtonVisible.classList.remove("fade-out")},400);const e=t.timeline({onComplete:()=>{t.set(this.modalElement,{visibility:"hidden",clearProps:"opacity,zIndex"},">"),this.modalInnerElement.scrollTo(0,0),this.allowToggle=!0}});e.set(this.openButton,{pointerEvents:"auto"}).to(this.modalInnerElement,{opacity:0,duration:.5,ease:"power2.inOut"}).to(this.modalBgElement,{opacity:0,duration:.5,ease:"power2.inOut"},"<+=0.1"),this.galleryStatus==="feed"&&(e.to(this.navMobileCurrent,{opacity:1,duration:.3,ease:"power2.inOut"},.4),e.to(".home__feed__img__label",{opacity:1,duration:.3,ease:"power2.inOut"},.4))}}addEventListeners(){this.onOpenButtonClickEvent=this.onOpenButtonClick.bind(this),this.onCloseButtonClickEvent=this.onCloseButtonClick.bind(this),this.openButton.addEventListener("click",this.onOpenButtonClickEvent),this.closeButton.addEventListener("click",this.onCloseButtonClickEvent),this.modalBgElement.addEventListener("click",this.onCloseButtonClickEvent)}}class k{constructor(){}create(){this.hasIntro=!1,this.gallery=new z,this.about=new B,this.createImagesPreloader(),this.show()}createImagesPreloader(){const e=[];document.querySelector(".about__modal .img__to__preload.selfpreload:not(.preloaded)")&&e.push(document.querySelector(".about__modal .img__to__preload.selfpreload:not(.preloaded)"));const s=document.querySelectorAll(".home__feed .img__to__preload.selfpreload:not(.preloaded)").length;for(let o=1;o<=s;o++)e.push(document.querySelector(`.home__feed__img:nth-child(${o}) .img__to__preload.selfpreload:not(.preloaded)`)),e.push(document.querySelector(`.home__index__thumb:nth-child(${o}) .img__to__preload.selfpreload:not(.preloaded)`));this.hasIntro||new q().addImgsToQueueAndPreload(e)}show(){this.tl=t.timeline({paused:!0}).to("nav, .content.home",{opacity:1,duration:.5,ease:"power2.inOut"},.2),this.tl.play()}onScroll(e){this.gallery.onScroll(e)}onResize(){this.gallery.onResize()}onMouseMove(e){this.gallery.onMouseMove(e)}}class M{constructor(){history.scrollRestoration="manual",t.registerPlugin(y),y.config({ignoreMobileResize:!0}),t.registerPlugin(v);let e=!1;window.localStorage.getItem("dark-mode")!==null?e=Number(window.localStorage.getItem("dark-mode")):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(e=1),e===1&&document.body.classList.add("dark-mode"),window.isTouch="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,document.documentElement.classList.add(window.isTouch?"device-touch":"device-mouse"),window.addEventListener("load",()=>{S.then(s=>{window.isWebp=s;const o=new L,i=o.getResult().device.type;window.isMobile=i=="mobile"||i=="tablet",document.documentElement.classList.add(window.isMobile?"mobile":"desktop");const n=o.getOS().name.toLowerCase().replace(/\s/g,"-");document.documentElement.classList.add(n),window.isIos=n==="ios";const l=o.getBrowser().name.toLowerCase().replace(/\s/g,"-");document.documentElement.classList.add(l),this.isMobilePortrait=null,this.allowChange=!0,this.template=document.body.getAttribute("data-template"),this.navigation=new T,this.pages={home:new k},this.page=this.pages[this.template.replace(/-(?!>)/g,"")],this.page.create(),document.body.style.visibility=null,this.addEventListeners(),this.onResize()})})}onMouseMove(e){this.page.onMouseMove(e)}onScroll(e){this.page&&this.page.onScroll(e)}onResize(){this.page.onResize()}onOrientationChange(e){const s=e.matches;s!==this.isMobilePortrait&&(this.isMobilePortrait=s,this.onResize())}addEventListeners(){if(document.querySelector(".wrapper").addEventListener("scroll",e=>{this.onScroll(e)},{passive:!0}),window.isTouch||document.body.addEventListener("mousemove",this.onMouseMove.bind(this)),!window.isMobile)window.addEventListener("resize",this.onResize.bind(this));else{const e=window.matchMedia("(orientation: portrait)");e.addEventListener("change",this.onOrientationChange.bind(this)),this.isMobilePortrait=e.matches}}}new M;
